version: 2.1
jobs:
  build:
    docker:
      - image: mcr.microsoft.com/dotnet/sdk:5.0
    steps:
      - checkout
      - run:
          name: Build
          command:
            dotnet build
      - run:
          name: Test
          command:
            dotnet test --logger "junit;LogFilePath=test-results/results.xml"
      - run:
          name: Publish Unit Test Results
          uses: EnricoMi/publish-unit-test-result-action@v1.6
          if: always()
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
            files: test-results/**/*.xml